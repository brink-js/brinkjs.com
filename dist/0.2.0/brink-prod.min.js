(function(){"use strict";var t,e,n,i,r,s;i="undefined"!=typeof exports&&this.exports!==exports,r=!i,e=i?global:window,n=e.Brink||e.$b||{},n.IS_NODE=i,n.IS_BROWSER=r,s=function(){},i?(e=global,e.include=e.include||require):e=window,t=e.$b=e.Brink=function(){var n;if(n=Array.prototype.slice.call(arguments,0),n.length){if(1===n.length&&"string"==typeof n[0]&&t.require)return t.require.apply(e,n);if(t.define)return Array.isArray(n[0])||Array.isArray(n[1])||n.splice(n.length-1,0,[]),t.define.apply(e,n)}return t},function(){Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;for(i=this.length||0,n=0;i>n;n++)t.call(e,this[n],n,this)})}(),function(){Array.prototype.filter||(Array.prototype.filter=function(t,e){var n=[];return this.forEach(function(i,r){t.call(e,i,r,this)&&n.push(i)}),n})}(),function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if(!this.length||!(this instanceof Array)||arguments.length<1)return-1;if(e=e||0,e>=this.length)return-1;for(;e<this.length;){if(this[e]===t)return e;e+=1}return-1})}(),function(){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)})}(),function(){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:t||window,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r})}(),function(){var t="undefined"!=typeof window?window:global;if(!("undefined"==typeof t||t.requestAnimationFrame&&t.cancelAnimationFrame)){for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;i++)t.requestAnimationFrame=t[n[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[i]+"CancelAnimationFrame"]||t[n[i]+"CancelRequestAnimationFrame"];return t.requestAnimationFrame||(t.requestAnimationFrame=function(n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),s=t.setTimeout(function(){n(i+r)},r);return e=i+r,s}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)}),t.requestAnimationFrame}}(),t.assert=t.error=t.required=s,function(){var e,n,i,r,s;s=0,e="undefined"!=typeof exports&&this.exports!==exports,n=e?global:window,i="undefined"!=typeof require?require:null,r=function(){function n(t,e){for(t=t.replace(/(^|[^\.])(\.\/)/g,"$1");e!==t;)e=t,t=t.replace(/([\w,\-]*[\/]{1,})([\.]{2,}\/)/g,"");return t.replace(/(\/{2,})/g,"/")}function r(){return{id:null,module:null,url:null,attachTo:null,attachPath:null,attach:function(t){var e;for(this.attachPath=t,t=t.split("."),this.attachTo=b(t[0]),e=1;e<t.length;e++)this.attachTo=this.attachTo[t[e]]=this.attachTo[t[e]]||{};this.module&&this.resolve()},resolve:function(e,n){var i,r;e&&(this.id=e),n&&(this.module=n),i=A[e]||{id:this.id},i.module=this.module,i.url=this.url||i.url,i.attachPath=this.attachPath||i.attachPath,i.order=i.order||s++,A[e]=i,n=this.module.exports||this.module,this.attachTo&&(r=this.id.split("/").pop(),"$b"===this.attachPath&&(f(r,this.module),t.CoreObject&&n.prototype instanceof t.CoreObject&&(n.toString=function(){return"Brink."+r})),this.attachTo[r]=this.module.exports||this.module),this.id&&n&&!n.hasOwnProperty("toString")&&t.CoreObject&&n.prototype instanceof t.CoreObject&&(n.toString=function(){return e})}}}function o(t){return t.substr(0,t.lastIndexOf("/"))}function a(t,e){return e=t&&t.indexOf(".")<0?"":e,t&&(~T.indexOf(t)||~t.indexOf("!"))?t.replace(/([\d,\w,\s,\.\/]*)(?=\!)/,function(t,n){return a(n,e)}):n((e?e+"/":"")+t)}function c(t,e,n,i){for(t=x.length-1;~t&&(n=x[t]);t--){for(i=1,e=n.m.length-1;~e&&i;e--)i=f(n.m[e]);i&&(x.splice(t,1),b(n.m,n.cb))}}function u(e,n,i){O.length&&(i=O.splice(0,1)[0],i&&(i.splice(0,0,e),i.splice(3,0,1),i.splice(4,0,0),n&&(i[5].url=n),_.apply(t,i)))}function h(t,n,r,s,o,a){return e?(i(t),u(n,t),1):(v=v||document.getElementsByTagName("head")[0],r=document.createElement("script"),r.src=t,r.onreadystatechange=r.onload=function(){r.readyState&&"complete"!==r.readyState&&"loaded"!==r.readyState||(clearTimeout(a),r.onload=r.onreadystatechange=r.onerror=null,u(n,t))},r.onerror=function(){throw clearTimeout(a),r.onload=r.onreadystatechange=r.onerror=null,new Error(t+" failed to load.")},a=setTimeout(r.onerror,1e3*M),v.insertBefore(r,v.firstChild),1)}function l(t,e,n,i,r,s,o){for(r={m:t,cb:e},x.push(r),i=0;i<t.length;i++)s=t[i],~s.indexOf("!")?d(s,n,r,i):(o=p(s),w[o]=f(s)||w[o]?1:h(o,s))}function d(t,e,i,r,s,h,l){return l=(e?e+"/":"")+"plugins/"+t.replace(/\//g,"_"),i&&(i.m[r]=l),t=t.split("!"),h=t.splice(0,1)[0],t=t.join("!"),s=f(l),!i||s?s:void b(h,function(s){function d(t){f(l,{exports:t}),c()}return t=s.normalize?s.normalize(t,function(t){return a(t,e)}):n(t),d.fromText=function(t,e,n){i.m[r]=l=t,n=O.length,new Function(e)(),O.length-n&&u(l)},s.load(t,b.localize(o(h)),d,j[h]||{})})}function f(t,e,n,i){return~T.indexOf(t)?t:(i=k[t]=e||k[t],i&&i.exports?n?i:i.exports:0)}function p(t,e){e=t.indexOf("/")&&t.indexOf("http")?P:"";for(var n in $)t=t.replace(new RegExp("(^"+n+")","g"),$[n]);return e+t+(t.indexOf(".")<0?".js":"")+D}function g(t,e,n){for(var i in e)n=t.indexOf(i),~n&&(t[n]=e[i]);return t}function m(t,e,n,i,r,s,o,a){for(C[t]=e,i=0;i<e.length;i++)if(s=e[i],o=C[s])for(r=0;r<o.length;r++)a=o[r],e.indexOf(a)<0&&(a!==t?e.push(a):f(s,{exports:{}}))}function _(t,e,n,i,s,a,u,h,l,d,p){return a||(a=r()),"string"!=typeof t?(n=e,e=t,t=0,O.push([e,n,a]),a):(Array.isArray(e)||(n=e,e=[]),l=o(t),p=b.localize(l),e.length||!n.length||"function"!=typeof n||n.__meta||(n.toString().replace(/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,"").replace(/(?:require)\(\s*['']([^''\s]+)['']\s*\)/g,function(t,n){e.indexOf(n)<0&&e.push(n)}),e=T.slice(0,n.length).concat(e)),e.length&&!s?(m(t,e.slice(0)),p(e,function(){_(t,Array.prototype.slice.call(arguments,0),n,1,1,a)}),a):(u=f(t,0,1),u=u||{exports:{}},"function"!=typeof n||n.__meta?u.exports=n:(h=g(e.length?e:T.slice(0,n.length),{require:p,module:u,exports:u.exports}),d=h.indexOf(b),~d&&(h[d]=p),u.exports=n.apply(n,h)||u.exports),f(t,u),a.resolve(t,u),delete C[t],c(),a))}function y(t){k[t]=A[t]=null,delete k[t],delete A[t]}function b(e,n,i,r,s,o,c){if(!n)return e=a(e,i),n=f(e),n?n:(c=d(e,i),c?c:{id:e,__isRequire:!0,resolve:function(t){return b(e,t)}});for(e=Array.isArray(e)?e:[e],o=[],s=0;s<e.length;s++)e[s]=a(e[s],i),o.push(f(e[s]));return~o.indexOf(0)?void l(e,n,i):n.apply(t,g(o,{require:b}))}var v,x=[],O=[],w={},k=t.__registry={},A={},C={},T=["require","exports","module"],j={},P="",D="",M=10,$={};return _.amd={},b.config=function(t){j=t||{},P=j.baseUrl?j.baseUrl:P,P+=P&&"/"!==P.charAt(P.length-1)?"/":"",P=n(P),D=j.urlArgs?"?"+j.urlArgs:D,M=j.waitSeconds||M;for(var e in j.paths)$[e]=j.paths[e]},b.toUrl=function(t,e){return p(a(t,e))},b.metas=function(){var t,e;e=[];for(t in A)e.push(A[t]);return e.sort(function(t,e){return t.order-e.order})},b.localize=function(t){function e(e,n){return b(e,n,t)}return e.toUrl=function(e){return b.toUrl(e,t)},e},{require:b,define:_,undefine:y}}(),t.require=r.require,t.define=r.define,t.undefine=r.undefine,i&&(require=i)}.call(this),t.require.config(n),t.define("$b",t),t.configure=function(e){var i;for(i in e)n[i]=e[i];return t.require.config(n),t},t.init=function(e,i){t.require([],function(){t.merge(t,{F:s}),t.merge(t.config,n),t.isFunction(e)?(i=e)(t):t.require(e,i)})},i&&(t.build=function(){var e=arguments;t.init(function(){t.build.apply(null,e)})},t.configure({paths:{brink:__dirname}}),t.init(),t.configure({paths:null}),module.exports=t),t.define("brink/config",function(){var t,e,n;return e=function(t,e,n){return"undefined"!=typeof navigator&&navigator&&"Microsoft Internet Explorer"===navigator.appName&&(e=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=n.exec(e)&&(t=parseFloat(RegExp.$1))),t||-1}(),t=e>-1,n=t&&9>e||!Object.defineProperty&&!Object.__defineGetter__,{DIRTY_CHECK:n,IS_IE:t,IE_VERSION:e}}).attach("$b"),t("brink/utils/isFunction",function(){return function(t){return"function"==typeof t}}).attach("$b"),t("brink/utils/computed",["./isFunction"],function(t){return function(e){return t(e)&&(e={watch:arguments[1],get:e}),"undefined"==typeof e.value&&(e.value=e.defaultValue),e.watch=e.watch?[].concat(e.watch):[],e.__isComputed=!0,e}}).attach("$b"),t("brink/utils/alias",["./computed"],function(t){return function(e){return t({watch:[e],get:function(){return this.get(e)},set:function(t){return this.set(e,t)}})}}).attach("$b"),t("brink/utils/get",[],function(){return function(e,n){var i,r;for(n=n.split("."),i=0;i<n.length;i++){if(r=n[i],!e)return null;if(e instanceof t.Object){if(e.isDestroyed)return null;e=e.__meta.getters[r]?e.__meta.getters[r].call(e,r):e.__meta.pojoStyle?e[r]:e.__meta.values[r]}else e=e[r]}return e}}).attach("$b"),t("brink/utils/getObjKeyPair",["./get"],function(t){return function(e,n,i){var r,s;for(n=n.split("."),r=0;r<n.length-1;r++)s=t(e,n[r]),null==s&&i&&(s=e[n[r]]={}),e=s;return n=n.pop(),[e,n]}}).attach("$b"),t("brink/utils/isBrinkInstance",[],function(){return function(t){return t.constructor.__meta.isObject}}).attach("$b"),t("brink/utils/bindTo",["./computed","./getObjKeyPair","./isBrinkInstance"],function(e,n,i){return function(n,r,s){var o;return arguments.length>1?(t.assert("Object must be an instance of Brink.Object or Brink.Class",i(n)),s||n.prop(r),o=e({boundTo:[n,r],get:function(){return n.get(r)},set:function(t){return n.set(r,t)}})):(r=n,o=e({watch:r,get:function(){return this.get(r)},set:function(t){return this.set(r,t)}})),o}}).attach("$b"),t("brink/utils/isObject",function(){var t={"function":!0,object:!0,unknown:!0};return function(e){return e?!!t[typeof e]:!1}}).attach("$b"),t("brink/utils/merge",["./isObject"],function(t){return function e(n,i,r){function s(e){return Array.isArray(e)?[]:t(e)?{}:!1}var o,a,c;if(Array.isArray(n)||Array.isArray(i)){for(n=n||[],i=i||[],o=0;o<i.length;o++)a=i[o],~n.indexOf(a)||(c=r?s(a):null,n.push(c?e(c,a,!0):a));return n}if(t(n)||t(i)){n=n||{},i=i||{};for(o in i)a=i[o],i.hasOwnProperty(o)&&(c=r?s(a):null,n[o]=c?e(c,a,!0):a);return n}return null}}).attach("$b"),t("brink/utils/clone",["./merge","./isObject"],function(t,e){return function(n,i,r){function s(t){return Array.isArray(t)?[]:e(t)?{}:null}return r=s(n),r?t(r,n,i):null}}).attach("$b"),t("brink/utils/configure",["./merge","../config"],function(e,n){return function(e){return t.merge(n,e),n}}).attach("$b"),t("brink/utils/defineProperty",["./isBrinkInstance"],function(e){return function(n,i,r){return t.assert("Object must be an instance of Brink.Object or Brink.Class",e(n)),r.configurable=!0,r.enumerable="undefined"!==r.enumerable?r.enumerable:!0,0===i.indexOf("__")&&(r.configurable=!1,r.enumerable=!1),r.get=n.__defineGetter(i,r.get||n.__writeOnly(i)),r.set=n.__defineSetter(i,r.set||n.__readOnly(i)),r.defaultValue="undefined"!=typeof r.defaultValue?r.defaultValue:r.value,delete r.value,delete r.writable,r}}).attach("$b"),t("brink/utils/unbound",[],function(){return function(t){return{value:t,__isUnbound:!0}}}).attach("$b"),t("brink/utils/expandProps",function(){return function(t,e){var n,i,r,s,o,a;for(t=[].concat(t),a=[],i=0;i<t.length;i++){if(s=t[i],!e&&~s.indexOf("."))for(n=s.split("."),n.splice(n.length-1,1),o=null;n.length;)o=o?o+".":"",o+=n.splice(0,1)[0],a.push(o);if(~s.indexOf(","))for(s=s.split("."),o=s.splice(0,s.length-1).join("."),n=s[0].split(","),s=[],r=0;r<n.length;r++)s.push([o,n[r]].join(o?".":""));a=a.concat(s)}return a}}).attach("$b"),t("brink/utils/extend",["./isObject","./isFunction"],function(t,e){function n(e){return t(e)&&e.constructor===Object}function i(t){return Array.isArray(t)}function r(s){var o,a,c,u,h,l,d,f,p;for("object"==typeof s||e(s)||(s={}),o=t(arguments[1])?1:2,l=arguments[1]===!0,a=arguments.length;a>o;o++)if(null!=(f=arguments[o]))for(d in f)c=s[d],h=f[d],s!==h&&(l&&h&&(n(h)||(p=i(h)))?(p?(p=!1,u=c&&i(c)?c:[]):u=c&&n(c)?c:{},s[d]=r(u,l,h)):void 0!==h&&(s[d]=h));return s}return r}).attach("$b"),t("brink/utils/flatten",["./merge"],function(t){return function e(n,i){var r,s,o;for(s=[],r=0;r<n.length;r++)o=n[r],Array.isArray(o)&&(o=e(o)),s=s.concat(o);return i||t([],s),s}}).attach("$b"),t("brink/utils/inject",[],function(){return function(t){t.inject.apply(t,arguments)}}).attach("$b"),t("brink/utils/intersect",[],function(){return function(t,e){var n,i,r;if(i=[],n=e.length,!t.length||!n)return i;for(;n--;)r=e[n],~t.indexOf(r)&&i.push(r);return i}}).attach("$b"),t("brink/utils/isBrinkObject",function(){return function(t){return t.__isObject}}).attach("$b"),t("brink/utils/set",["./get","./getObjKeyPair"],function(e,n){var i=function(r,s,o,a,c){var u,h,l;if("string"==typeof s)return s.indexOf(".")>-1&&(r=n(r,s,!0),s=r[1],r=r[0]),h=e(r,s),l=h!==o,(c||l)&&(r instanceof t.Object?(l&&(h instanceof t.Object&&h.__removeReference(r),o instanceof t.Object&&o.__addReference(r,"proxy"===s&&o instanceof t.ObjectProxy?"":s)),o&&o.__isUnbound&&(o=o.value),r.__meta.setters[s]?r.__meta.setters[s].call(r,o,s):(r.__meta.pojoStyle&&(r[s]=o),r.__meta.values[s]=o),a||r.propertyDidChange(s)):r[s]=o),r;if(2===arguments.length){for(u in s)i(r,u,s[u],o,a);return r}t.error("Tried to call `set` with unsupported arguments",arguments)};return i}).attach("$b"),t("brink/utils/trim",function(){return function(t){return"string"==typeof t?t.replace(/^\s+|\s+$/gm,""):t}}).attach("$b"),t("brink/core/CoreObject",["../utils/extend"],function(t){var e;return e=function(){},e.extend=function(e){function n(t){var e;return t===!0||t===!1?(t&&(e=this.__init||this.init||this.constructor,e.call(this)),this):n.extend.apply(n,arguments)}var i,r,s;if(arguments.length>1){for(r=0,i=this;r<arguments.length-1;)i=i.extend(arguments[r]),r++;return i}return s=this.buildPrototype.call(this,e),n.prototype=s,t(n,this,s.statics||{}),n.prototype.constructor=n,n},e.buildPrototype=function(e){var n=function(){};return n.prototype=this.prototype,t(new n,e)},e.inject=function(e,n){return"object"==typeof e?t(this.prototype,e):this.prototype[e]=n,this},e.create=function(){var t,e;return e=new this(!1),t=e.__init||e.init,t&&(e=t.apply(e,arguments)||e),e},e}).attach("$b"),t("brink/utils/bindFunction",[],function(){return function(t,e){return function(){return t.apply(e,arguments)}}}).attach("$b"),t("brink/core/Object",["../config","./CoreObject","../utils/get","../utils/set","../utils/clone","../utils/merge","../utils/bindTo","../utils/flatten","../utils/intersect","../utils/isFunction","../utils/expandProps","../utils/bindFunction","../utils/getObjKeyPair","../utils/defineProperty"],function(e,n,i,r,s,o,a,c,u,h,l,d,f,p){var g;return g=n.extend({__init:function(e){var n,i,r;this.__meta?r=this.__buildMeta():(this.__parsePrototype.call(this),r=this.__meta),r.references=[],r.referenceKeys=[],e&&"object"==typeof e&&!Array.isArray(e)&&(e=s(e),this.__appendToMeta(e,r));for(i in r.properties)this.__defineProperty.call(this,i,r.properties[i]);if(this.__autoBindMethods)for(n=0;n<r.methods.length;n++)i=r.methods[n],~i.indexOf("__")||(this[i]=d(this[i],this));return this.init&&this.init.apply(this,arguments),r.isInitialized=!0,t.instanceManager&&t.instanceManager.add(this,r),this},init:function(){},__buildMeta:function(){var t;return t=this.__meta=s(this.__meta||{}),t.getters=s(t.getters||{}),t.setters=s(t.setters||{}),t.properties=s(t.properties||{}),t.methods=s(t.methods||[]),t.dependencies=s(t.dependencies||[]),t.values={},t.watchers={fns:[],props:[]},t.memoizedBindings={},t},__parsePrototype:function(){this.__appendToMeta(this,this.__buildMeta(),!0)},__appendToMeta:function(t,e,n){var i,r;for(i in t)r=t[i],h(r)?"constructor"===i||~e.methods.indexOf(i)||(e.methods.push(i),n||(this[i]=t[i])):t.hasOwnProperty(i)&&"__meta"!==i&&(r&&r.__isRequire&&~!e.dependencies.indexOf(i)?e.dependencies.push(i):this.prop.call(this,i,r))},__defineProperty:function(t,e){e=s(e),Object.defineProperty?Object.defineProperty(this,t,e):this.__defineGetter__?(this.__defineGetter__(t,e.get),this.__defineSetter__(t,e.set)):this.__meta.pojoStyle=!0,"undefined"!=typeof e.defaultValue&&this.set(t,e.defaultValue,!0,!0)},__undefineProperties:function(){var t,e,n,i,r;i=this.__meta,r=i.externalBindings;for(e in r)for(n=0;n<r[e].length;n++)t=r[e][n],t.obj.isDestroyed||t.obj.unwatch(t.localProp.didChange);for(e in this.__meta.properties)delete this[e]},__readOnly:function(e){return this.__meta.pojoStyle?t.error("Tried to write to a read-only property `"+e+"` on "+this):void 0},__writeOnly:function(e){return this.__meta.pojoStyle?t.error("Tried to read a write-only property `"+e+"` on "+this):void 0},__defineGetter:function(t,e){return h(e)&&(this.__meta.getters[t]=e),function(){return this.get(t)}},__defineSetter:function(t,e){return h(e)&&(this.__meta.setters[t]=e),function(e){return this.set(t,e)}},__hasReference:function(t){var e=this.__meta;return!!~e.references.indexOf(t)},__addReference:function(t,e){var n=this.__meta;n.references.push(t),n.referenceKeys.push(e)},__removeReference:function(t){var e,n;n=this.__meta,e=n.references.indexOf(t),~e&&(n.references.splice(e,1),n.referenceKeys.splice(e,1))},propertyDidChange:function(e){t.instanceManager.propertyDidChange(this,e)},getProperties:function(){var t,e,n,i;if(i=c([].slice.call(arguments,0,arguments.length)),n={},arguments.length){for(t=0;t<i.length;t++)n[i[t]]=this.get(i[t]);return n}for(e in this.__meta.properties)n[e]=this.get(e);return n},getChangedProperties:function(){return this.getProperties(t.instanceManager.getChangedProps(this))},prop:function(t,e){var n,i,r,s,o,c,u;if(s=f(this,t),t=s[1],s=s[0]||this,c=s.__meta,c.bindings=c.bindings||{},c.externalBindings=c.externalBindings||{},"undefined"!=typeof c.properties[t]&&"undefined"==typeof e)return c.properties[t];if(e&&e.__isComputed||(e={get:!0,set:!0,value:e}),e=c.properties[t]=p(s,t,e),e.key=t,u=e.watch,u&&(i=u.length)){for(o=[];i--;)for(n=u[i].split("."),r=null;n.length;)r=(r?r.concat("."):"").concat(n.splice(0,1)[0]),o.push(r);for(i=o.length,i&&(c.memoizedBindings={});i--;)n=c.bindings[o[i]]=c.bindings[o[i]]||[],~n.indexOf(t)||n.push(t)}return e.bindTo=function(t,e){this.prop(e,a(t,e))}.bind(s),e.didChange=function(){s.propertyDidChange(t)}.bind(s),e.boundTo&&(n=c.externalBindings[t]=c.externalBindings[t]||[],n.push({obj:e.boundTo[0],key:e.boundTo[1],localProp:e}),e.boundTo[0].watch(e.boundTo[1],e.didChange)),c.isInitialized&&s.__defineProperty(t,e),e},bindProperty:function(t,e,n){return this.prop(t).bindTo(e,n)},get:function(t){return i(this,t)},set:function(t,e,n,i){return r(this,t,e,n,i)},watch:function(){var e,n;n=arguments[0],e=arguments[1],t.instanceManager?("function"!=typeof e?(e=[].slice.call(arguments,arguments.length-1,arguments.length)[0],n=1===arguments.length?[]:l(c([].slice.call(arguments,0,arguments.length-1)))):n=l([].concat(n)),t.instanceManager.watch(this,n,e)):t.error("InstanceManager does not exist, can't watch for property changes.")},unwatch:function(){t.instanceManager?t.instanceManager.unwatch(this,c(arguments)):t.error("InstanceManager does not exist, can't watch for property changes.")},unwatchAll:function(){t.instanceManager?t.instanceManager.unwatchAll(this):t.error("InstanceManager does not exist, can't watch for property changes.")},willNotifyWatchers:function(){},didNotifyWatchers:function(){},destroy:function(){this.unwatchAll(),this.__undefineProperties(),t.instanceManager&&t.instanceManager.remove(this),this.__meta=null,this.isDestroyed=!0}}),g.extend=function(){var t,e;return e=n.extend.apply(this,arguments),t=e.prototype,t.__parsePrototype.call(t),e},g.define=function(){return t.define(this.prototype.__dependencies,d(this.resolveDependencies,this)),this},g.resolveDependencies=function(){var t,e;t=this.prototype;for(e in t.__dependencies)t[e]=t.__dependencies[e].resolve();return this.__meta.dependenciesResolved=!0,this},g.load=function(e){return e="function"==typeof e?e:function(){},this.__meta.dependenciesResolved&&e(this),t.require(this.prototype.__dependencies,d(function(){this.resolveDependencies.call(this),e(this)},this)),this},g.__meta=o(g.__meta||{},{isObject:!0}),g}).attach("$b"),t("brink/core/NotificationManager",["../utils/isFunction"],function(e){function n(t){s.push(t),i(t)}function i(t){var e,n,i;if(e=t.name,r[e]){for(n=r[e].slice(0),i=n.length;t.pointer<i;){if(1!==t.status)return;n[t.pointer].apply(null,[].concat(t,t.args)),t.pointer++}n=null,1!==t.status||t.callback||t.cancel()}}var r,s,o,a;return s=[],r={},o=function(t,e,n){return this.name=t,this.args=e,this.data=e&&1===e.length?e[0]:null,this.callback=n,this},o.prototype.data={},o.prototype.name="",o.prototype.dispatcher=null,o.prototype.status=0,o.prototype.pointer=0,o.prototype.callback=null,o.prototype.hold=function(){this.status=2},o.prototype.release=function(){this.status=1,a.releaseNotification(this)},o.prototype.cancel=function(){this.data={},this.name="",this.status=0,this.pointer=0,this.dispatcher=null,this.callback=null,a.cancelNotification(this)},o.prototype.dispatch=function(t){this.status=1,this.pointer=0,this.dispatcher=t,a.publishNotification(this)},o.prototype.respond=function(){this.callback&&(this.callback.apply(this.dispatcher,arguments),this.cancel())},a={},a.subscribe=function(t,e,n){n=isNaN(n)?-1:n,r[t]=r[t]||[],-1>=n||n>=r[t].length?r[t].push(e):r[t].splice(n,0,e)},a.unsubscribe=function(t,e){var n=r[t].indexOf(e);n>-1&&r[t].splice(n,1)},a.publish=function(){var t,i=Array.prototype.slice.call(arguments),r=i[0],s=i[i.length-1],a=i[i.length-2];a=e(a)?a:null,i=i.slice(1,a?i.length-2:i.length-1),t=new o(r,i,a),t.status=1,t.pointer=0,t.dispatcher=s,n(t)},a.releaseNotification=function(t){t.status=1,s.indexOf(t)>-1&&i(t)},a.cancelNotification=function(t){s.splice(s.indexOf(t),1),t=null},t.define("notificationManager",a).attach("$b"),a}).attach("$b.__"),t("brink/core/Class",["../config","./Object","./NotificationManager","../utils/bindFunction","../utils/merge"],function(t,e,n,i,r){function s(t,e){return function(){var n,i=this._super||null;return this._super=e,n=t.apply(this,arguments),this._super=i,n}}var o,a;return a=/xyz/.test(function(){var t;t=!0})?/\bthis\._super\b/:/.*/,o=e({__init:s(function(){return this.__autoBindMethods=!0,this._super.apply(this,arguments)},e.prototype.__init),subscribe:function(t,e,i){this._interestHandlers=this._interestHandlers||{},e&&!this._interestHandlers[t]&&(e=e,n.subscribe(t,e,i),this._interestHandlers[t]=e)},unsubscribe:function(t){this._interestHandlers&&this._interestHandlers[t]&&(n.unsubscribe(t,this._interestHandlers[t]),delete this._interestHandlers[t])},unsubscribeAll:function(){var t;for(t in this._interestHandlers)this._interestHandlers.hasOwnProperty(t)&&this.unsubscribe(t);this._interestHandlers=[]},publish:function(){var t=Array.prototype.slice.call(arguments);n.publish.apply(n,[].concat(t,this))},destroy:s(function(){return this.unsubscribeAll(),this._super.apply(this,arguments)},e.prototype.destroy)}),o.buildPrototype=function(t){var n,i;i=e.buildPrototype.call(this,t);for(n in t)"function"==typeof t[n]&&"function"==typeof this.prototype[n]&&a.test(t[n])?i[n]=s(t[n],this.prototype[n]):"object"==typeof t[n]&&("concatProps"===n||~(t.concatProps||[]).indexOf(n)||~(this.prototype.concatProps||[]).indexOf(n))&&(i[n]=r(this.prototype[n],t[n]));return i},o}).attach("$b"),t("brink/core/Array",["./Object"],function(t){var e,n;return n=Array.prototype,e=t({content:null,length:0,oldContent:null,pristineContent:null,getChanges:function(){return{added:[],removed:[],moved:[]}},init:function(t){t=t||[],this.set("content",t),this.set("oldContent",t.concat()),this.set("length",this.content.length),this.watch("content",this.contentDidChange)},get:function(e){return isNaN(e)?t.prototype.get.apply(this,arguments):this.content[e]},set:function(e,n){return isNaN(e)?t.prototype.set.apply(this,arguments):(this.replaceAt(e,n),n)},findBy:function(t,e){var n,i;for(n=0;n<this.content.length;n++)if(i=this.content[n],i[t]===e)return i;return null},findIndexBy:function(t,e){var n,i;for(n=0;n<this.content.length;n++)if(i=this.content[n],i[t]===e)return n;return-1},forEach:function(t,e){var n;for(n=0;n<this.content.length;n++)t.call(e,this.content[n],n,this)},concat:function(){var t=n.concat.apply(this.content,arguments);return this.prototype.constructor.create(t)},insert:function(){return this.push.apply(this,arguments)},insertAt:function(t,e){return this.splice(t,0,e),this.get("length")},push:function(){var t;for(t=0;t<arguments.length;t++)this.insertAt(this.length,arguments[t]);return this.length},pop:function(t){return t=this.length-1,this.removeAt(t)},remove:function(t,e){return e=this.content.indexOf(t),~e?this.removeAt(e):!1},removeAt:function(t,e){return e=n.splice.call(this.content,t,1),this.contentDidChange(),e[0]},replace:function(t,e,n){return n=this.content.indexOf(t),~n?this.replaceAt(n,e):void 0},replaceAt:function(t,e){return this.removeAt(t),this.insertAt(t,e)},splice:function(t,e){var i,r,s;if(s=[],r=n.splice.call(arguments,2,arguments.length),e>0)for(i=t,e=t+e;e>i;)s.push(this.removeAt(t)),i++;for(i=0;i<r.length;i++)this.content.splice(t+i,0,r[i]),this.contentDidChange();return s},shift:function(){return this.removeAt(0)},unshift:function(){var t;for(t=0;t<arguments.length;t++)this.insertAt(0,this.arguments[t]);return this.length},reverse:function(){var t;return this.pristineContent||(this.pristineContent=this.content),t=n.reverse.apply(this.content,arguments),this.contentDidChange(),this},filter:function(){return this.pristineContent||(this.pristineContent=this.content),this.content=n.filter.apply(this.content,arguments),this.contentDidChange(),this.content},sort:function(){return this.pristineContent||(this.pristineContent=this.content,this.content=this.content.concat()),n.sort.apply(this.content,arguments),this.contentDidChange(),this.content},reset:function(){this.content=this.pristineContent,this.pristineContent=null},willNotifyWatchers:function(){this.getChanges=function(){var t,e,n,i,r,s,o,a;for(o=this.oldContent,a=this.content,e={added:[],removed:[],moved:[]},t=0;t<Math.max(o.length,a.length);t++)n=a[t],i=o[t],n!==i&&(i?(r=a.indexOf(i),~r?e.moved.push({oldIndex:t,newIndex:r,item:i}):e.removed.push({index:t,item:i})):(s=o.indexOf(n),~s?e.moved.push({oldIndex:s,newIndex:t,item:n}):e.added.push({index:t,item:n})));return this.getChanges=function(){return e},e}.bind(this)},didNotifyWatchers:function(){this.oldContent=this.content.concat(),this.__meta&&(this.__meta.contentChanges={})},contentDidChange:function(){this.set("length",this.content.length),this.propertyDidChange("@each")}})}).attach("$b"),t("brink/core/Dictionary",["./Object"],function(t){return t({keys:null,values:null,init:function(){var t;for(this.keys=[],this.values=[],t=0;t<arguments.length;t++)this.add.apply(this,[].concat(arguments[t]));this.length=this.keys.length},get:function(e){var n;return n="string"!=typeof e?this.keys.indexOf(e):-1,~n?this.values[n]:t.prototype.get.apply(this,arguments)},set:function(e,n){var i;return i="string"!=typeof e?this.keys.indexOf(e):-1,~i?(this.values[i]=n,n):t.prototype.set.apply(this,arguments)},add:function(t,e){this.keys.push(t),this.values[this.keys.length-1]=e},remove:function(){var t,e,n;for(n=[],e=0;e<arguments.length;e++)t=this.keys.indexOf(arguments[e]),~t&&(this.keys.splice(t,1),n.push(this.values.splice(t,1)[0]));return n},has:function(t){return!!~this.keys.indexOf(t)},indexOf:function(t){return this.keys.indexOf(t)},forEach:function(t,e){var n;for(n=0;n<this.keys.length;n++)t.call(e,this.values[n],this.keys[n],n,this);return this}})}).attach("$b"),t("brink/core/ObjectProxy",["./Object","../utils/get","../utils/set","../utils/getObjKeyPair"],function(t,e,n,i){return t({proxy:null,__hasProp:function(t){var e,n;return e=i(this,t),t=e[1],e=e[0]||this,n=e.__meta,"undefined"!=typeof n.properties[t]},get:function(t){return e(this.__hasProp(t)?this:this.get("proxy"),t)},set:function(t,e,i,r){return n(this.__hasProp(t)?this:this.get("proxy"),t,e,i,r)}})}).attach("$b"),t("brink/core/RunLoop",["./CoreObject"],function(t){return t.extend({__interval:"raf",__timerID:null,__started:!1,init:function(t){return this.clear(),"undefined"!=typeof t&&this.setInterval.call(this,t),this},setInterval:function(t){t=isNaN(t)?t.toLowerCase():t,this.__interval="raf"===t||"requestanimationframe"===t?"raf":t,this.stopTimer()&&this.start()},startTimer:function(t){return t=t.bind(this),"raf"===this.__interval?requestAnimationFrame(t):setTimeout(t,this.__interval)},stopTimer:function(){return this.__timerID?("raf"===this.__interval?cancelAnimationFrame(this.__timerID):clearTimeout(this.__timerID),this.__timerID=null,!0):!1},start:function(t){return this.__started=!0,!this.__timerID||t?(this.stopTimer(),this.__timerID=this.startTimer(function(){this.start(!0),this.run()})):void 0},restart:function(){this.start(!0)},stop:function(){return this.__started=!1,this.stopTimer()},defer:function(){return this.start()},deferOnce:function(){return this.stopTimer(),this.__timerID=this.startTimer(function(){this.stopTimer(),this.run()}.bind(this))},run:function(){var t,e,n,i;if(!this.__once.length&&!this.__loop.length)return!1;for(t=0;t<this.__once.length;t++)e=this.__once[t],n=this.__onceArgs[t][0],i=this.__onceArgs[t][1],e.call(i,n);for(t=0;t<this.__loop.length;t++)e=this.__loop[t],n=this.__loopArgs[t][0],i=this.__loopArgs[t][1],e.call(i,n);return this.__once=[],this.__onceArgs=[],!0},once:function(t,e,n){var i=this.__once.indexOf(t);0>i?(this.__once.push(t),i=this.__once.length-1):(e=e||this.__onceArgs[i][0],n=n||this.__onceArgs[i][0]),this.__onceArgs[i]=[e||null,n||null]},loop:function(t,e,n){var i=this.__loop.indexOf(t);0>i&&(this.__loop.push(t),i=this.__loop.length-1),this.__loopArgs[i]=[e||null,n||null]},remove:function(t){var e;e=this.__once.indexOf(t),e>=0&&this.__once.splice(e,1),e=this.__loop.indexOf(t),e>=0&&this.__loop.splice(e,1)},clear:function(){this.__loop=[],this.__once=[],this.__loopArgs=[],this.__onceArgs=[]}})}).attach("$b.__"),t("brink/core/InstanceWatcher",["../config","./CoreObject","./RunLoop","../utils/intersect"],function(t,e,n,i){return e.extend({instanceManager:null,init:function(t){var e;return e=this,this.instanceManager=t,this.runLoop=n.create(),this.runLoop.loop(function(){e.run()}),this},processBindings:function(t,e,n,i,r){var s,o,a,c,u,h,l,d,f,p,g,m,_;for(p=n.bindings,_=n.memoizedBindings=n.memoizedBindings||{},i=i?i.concat("."):"",f=[],r=r||20,s=0,a=m=e.length;a>s;s++){if(m>s?(c=i.concat(e[s]),e[s]=c):c=e[s],g=_[c],null==g){if(g=[],p[c]&&(g=p[c].concat()),d=c.split("."),d.length>1&&(l=".".concat(d.pop()),u=d.join("."),h=p[u],h&&(o=h.length)))for(;o--;)g.push(h[o].concat(l));_[c]=g}if(r){for(o=g.length;o--;)d=g[o],-1===e.indexOf(d)&&(e[a++]=d);r--}}return e},run:function(){var t,e,n,r,s,o,a,c,u,h,l,d,f,p,g,m,_,y,b;for(d=this.instanceManager,p=d.instances,l=d.changedProps,_=d.changedInstances,c=[],e=0;_.length;)if(r=_[e],f=p[r]){if(o=f.__meta,m=o.references,b=o.referenceKeys,h=l[e],this.processBindings(f,h,o),h.length&&m.length)for(t=o.references.length;t--;)g=m[t],c.indexOf(g)>-1||(c.push(g),s=b[t],a=g.__meta,u=this.processBindings(g,h.concat(),a,s),d.propertiesDidChange(g,u));for(t=o.watchers.fns.length,f.willNotifyWatchers.call(f);t--;)n=o.watchers.fns[t],u=o.watchers.props[t],y=u.length?i(u,h):h.concat(),y.length&&n.call(null,y);f.didNotifyWatchers.call(f),l.splice(e,1),_.splice(e,1)}else l.splice(e,1),_.splice(e,1);d.changedProps=[],d.changedInstances=[],this.stop()},start:function(){this.runLoop.start()},stop:function(){this.runLoop.stop()}})}).attach("$b.__"),t("brink/core/InstanceManager",["../config","./CoreObject","./InstanceWatcher","../utils/get","../utils/merge","../utils/flatten"],function(e,n,i,r,s,o){var a,c=1;return"undefined"!=typeof window&&(window.count=0),a=n.extend({instances:null,changedProps:null,changedInstances:null,init:function(){this.instances={},this.changedProps=[],this.changedInstances=[],this.watcher=i.create(this)},buildMeta:function(t){
return t=t||{},t.iid=c++,t},add:function(t,e){return e=this.buildMeta(e),this.instances[e.iid]=t,e},remove:function(t){this.instances[t.__meta.iid]=null},getChangedProps:function(t){var e,n;return n=t.__meta,e=this.changedInstances.indexOf(n.iid),~e?this.changedProps[e]:[]},propertyDidChange:function(t,e){var n,i,r,s,o,a;return r=t.__meta,a=this.changedInstances,o=this.changedProps,i=a.indexOf(r.iid),-1===i?(a.push(r.iid),s=[],o.push(s)):s=o[i],n=s.length,-1===s.indexOf(e)&&(s[n]=e),this.watcher.start(),s},propertiesDidChange:function(t,e){var n,i,r,s,o,a,c,u;for(o=t.__meta,u=this.changedInstances,c=this.changedProps,s=u.indexOf(o.iid),-1===s?(u.push(o.iid),a=[],c.push(a)):a=c[s],n=e.length,i=a.length;n--;)r=e[n],-1===a.indexOf(r)&&(a[i++]=r);return this.watcher.start(),a},watch:function(t,e,n){var i,r;r=t.__meta,i=r.watchers.fns.indexOf(n),-1===i&&(r.watchers.fns.push(n),i=r.watchers.fns.length-1),r.watchers.props[i]=s(r.watchers.props[i]||[],e),r.watchedProps=o(r.watchers.props)},unwatch:function(t,e){var n,i,r,s;for(s=t.__meta,n=0;n<e.length;n++)i=e[n],r=s.watchers.fns.indexOf(i),~r&&(s.watchers.fns.splice(r,1),s.watchers.props.splice(r,1));s.watchedProps=o(s.watchers.props)},unwatchAll:function(t){var e;e=t.__meta,e.watchers={fns:[],props:[]},e.watchedProps=[]}}),t.define("instanceManager",a.create({})).attach("$b"),t("instanceManager")}),t("brink/dom/DOMObject",["../core/Class","../utils/get","../utils/trim","../utils/merge","../utils/computed"],function(t,e,n,i,r){var s=t({dom:null,isAttr:!1,isText:!1,isElement:!1,isDynamic:!1,isLocked:!1,tokens:null,parent:null,context:null,templateString:"",processedTemplate:"",cachedValue:null,watchedProperties:r(function(){var t,e;return t=[],e=this.get("tokens")||[],e.forEach(function(e){t.push("context."+e.name)}),t},"tokens"),compile:function(t){var e,i;i=[],e=/(?:\{\{\s*)([^\||}]+)(?:\|?)([\s\S]*?)(?:\s*\}\})/gi,t=t.replace(e,function(t,e,n){return i.push({string:t,name:e,filter:n||null}),"{{$"+(i.length-1)+"}}"}),this.set("tokens",i),this.set("processedTemplate",n(t)||"")},init:function(){this.watch("watchedProperties",this.contextWatcher),this.set("templateString",this.get("dom."+this.get("updateProp"))),this.compile(this.get("templateString")),this.contextWatcher()},contextWatcher:function(){var t;t=this.get("watchedProperties"),this.unwatch(this.contextUpdated),t&&t.length&&(this.watch(t.concat("isLocked"),this.contextUpdated),this.contextUpdated())},replaceTokens:function(t,e){var n;for(n=0;n<e.length;n++)t=t.replace("{{$"+n+"}}",this.get("context."+e[n].name)||"");return t},updateDOM:function(){var t=this.replaceTokens(this.get("processedTemplate"),this.get("tokens"));t!==this.get("cachedValue")&&(this.set("cachedValue",t),this.get("dom")[this.get("updateProp")]=t)},render:function(t){this.set("context",t)},rerender:function(){this.updateDOM()},contextUpdated:function(){!this.get("isLocked")&&this.get("dom")&&this.get("isDynamic")&&this.get("context")&&(this.get("isAttr")||this.get("dom").parentNode)&&this.rerender()}});return s}).attach("$b.dom"),t("brink/dom/Attr",["./DOMObject"],function(t){return t({isAttr:!0,isDynamic:!0,updateProp:"value"})}).attach("$b.dom"),t("brink/dom/Text",["./DOMObject"],function(t){return t({isText:!0,isDynamic:!0,updateProp:"nodeValue"})}).attach("$b.dom"),t("brink/dom/Element",["./Attr","./Text","./DOMObject","../utils/get","../utils/trim","../utils/unbound"],function(e,n,i,r,s,o){var a=i({isElement:!0,isDynamic:!1,tokens:null,init:function(){this.compile()},getElementClass:function(e){return r(t,"dom.elements."+e.toLowerCase())||a},compile:function(){var i,a,c,u,h,l,d,f,p,g,m,_;if(u=this.get("dom"),g=this.get("subTags"),m=[],_=[],u.childNodes&&u.childNodes.length)for(i=0;i<u.childNodes.length;i++)if(d=u.childNodes[i],3===d.nodeType){if(g&&(c=/\{\s*\%\s*(\S*)\s([^%}]*?)\s*\%\s*\}([\s\S]*)/gi,(a=c.exec(d.nodeValue))&&g[a[1]])){p=r(t,"dom.tags."+a[1]+".domTag"),f=document.createElement(p),"brink-tag"===p&&f.setAttribute("tag",a[1]),a[2]&&f.setAttribute("options",a[2]),h=d.nodeValue.replace(c,s("$3")),u.insertBefore(f,d),i--,h?d.nodeValue=h:u.removeChild(d);continue}m.push(n.create({dom:d,parent:o(this)}))}else{var y;y="brink-tag"===d.tagName.toLowerCase()?r(t,"dom.tags."+d.getAttribute("tag")):this.getElementClass(d.tagName),m.push(y.create({dom:d,parent:o(this)}))}if(this.set("children",m),!this.get("isTag")){if(u.attributes&&u.attributes.length)for(i=0;i<u.attributes.length;i++)l=u.attributes[i],_.push(e.create({dom:l,parent:o(this)}));this.set("attributes",_)}},updateDOM:function(){},render:function(t){var e,n;e=this.get("children")||[],n=this.get("attributes")||[],e.forEach(function(e){e.render(t)}),n.forEach(function(e){e.render(t)})},rerender:function(){var t,e;t=this.get("children")||[],e=this.get("attributes")||[],t.forEach(function(t){t.rerender()}),e.forEach(function(t){t.rerender()})},destroy:function(){var t=this.get("dom");return t&&t.parentNode&&t.parentNode.removeChild(t),this._super.apply(this,arguments)}});return a}).attach("$b.dom"),t("brink/browser/ready",[],function(){return function(t){return"undefined"!=typeof document?"complete"===document.readyState?void t():void document.addEventListener("DOMContentLoaded",t):void t()}}).attach("$b"),t("brink/dom/Template",["./Element","../core/Class","../utils/get","../browser/ready","../utils/unbound"],function(e,n,i,r,s){function o(e){var n,r,s;for(r=/\{\s*\%\s*(\S*)\s([^%}]*?)\s*\%\s*\}([\s\S]*?)\{\s*\%\s*(end\1)\s*\%\s*\}/gi;n=r.exec(e);)s=i(t,"dom.tags."+n[1]+".domTag"),t.assert('No "'+n[1]+'" tag found. '+n[0],!!s),e=e.replace(r,"<"+s+("brink-tag"===s?' tag="$1"':"")+' options="$2">$3</'+s+">");return e}var a;"undefined"!=typeof window&&(a=window.Node);var c=n({domObj:null,isEmpty:!1,context:null,template:null,dom:t.bindTo("domObj.dom"),dom2:t.bindTo("domObj.dom"),init:function(e,n){n||(t.assert("Must pass a string or Node when constructing a Template",!!e),this.template=e,this.compile())},parseHTML:function(t){var e=this.parseHTML=window.$||window.jQuery||function(t,e){return e=document.createElement("div"),e.innerHTML=t,e};return e(t)},compile:function(){var t,n,i;for(t=this.template,t instanceof a||(t=this.parseHTML(o(t))),n=t.childNodes,i=document.createDocumentFragment();n.length;)i.appendChild(n[0]);return this.set("domObj",e.create({dom:i,parent:s(this)})),this.clone()},clone:function(){var t=c.create(null,!0);return t.set("domObj",e.create({dom:this.get("dom").cloneNode(!0),parent:s(t)})),t},precompile:function(){return this.compile()},render:function(t){return this.set("context",t),this.get("domObj").render(t),this.get("dom")},destroy:function(){var t=this.get("domObj");return t&&t.destroy(),this.set("context",null),this._super()}});if("undefined"!=typeof document){var u;u=document.createElement("style"),u.appendChild(document.createTextNode("")),document.head.appendChild(u),u.sheet.insertRule("brink-template {display : none;}",0),document.registerElement?document.registerElement("brink-template"):document.createElement("brink-template"),r(function(){var e,n,i,r;for(r=document.getElementsByTagName("brink-template"),e=0;e<r.length;e++)n=r[e],i=n.getAttribute("name"),t.assert("Embedded templates must specify a name... "+n.innerHTML,!!i),t("templates/"+i,c.create(n.innerHTML))})}return c}).attach("$b"),t("brink/dom/Tag",["./Element","../utils/set"],function(e,n){var i,r;return r=[],i=e({domTag:null,isTag:!0,isDynamic:!0,init:function(){this.watch("watchedProperties",this.contextWatcher),this.compile(),this.contextWatcher()},compile:function(){this._super.apply(this,arguments),this.parseOptions(this.get("dom").getAttribute("options"))},parseOptions:function(){}}),i.extend=function(){var i,s,o;return o=e.extend.apply(this,arguments),i=o.prototype,s=i.domTag,s&&s.indexOf("-")<0&&n(i,"domTag",s="brink-"+s),s&&r.indexOf(s)<0&&(t("dom/elements/"+s,o).attach("$b.dom.elements"),r.push(s),"undefined"!=typeof document&&(document.registerElement?document.registerElement(s):document.createElement(s))),o.domTag=s,o},i.extend({domTag:"brink-tag"})}).attach("$b.dom"),t("brink/dom/tags/else",["../Tag"],function(t){return t.extend({})}).attach("$b.dom.tags"),t("brink/dom/tags/if",["../Tag","./else","../../utils/trim"],function(t,e,n){return t.extend({ifChildren:null,elseChildren:null,subTags:{"else":e},parseOptions:function(t){this.set("tokens",[{string:t,name:n(t),filter:null}])},compile:function(){var t,e;this._super.apply(this,arguments),this.separateChildren(),t=this.get("dom"),e=document.createTextNode(""),t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t),this.set("dom",e)},separateChildren:function(){var t,n,i,r,s;n=this.get("children")||[],r=[],s=[],t=r,n.forEach(function(n){return n.get("isTag")&&n.set("isLocked",!0),n instanceof e?(i=n,void(t=s)):void t.push(n)}),i&&(n.splice(n.indexOf(i),1),i.set("children",null),i.destroy()),this.set("children",n),this.set("ifChildren",r),this.set("elseChildren",s)},parentHasChild:function(t,e){return Array.prototype.indexOf.call(t.childNodes,e)>-1},addChildrenToDOM:function(t){var e,n,i;e=this.get("dom"),i=e.parentNode,i&&t&&t.length&&(n=document.createDocumentFragment(),t.forEach(function(t){n.appendChild(t.get("dom")),t.get("isTag")&&t.set("isLocked",!1)}),i.insertBefore(n,e.nextSibling))},removeChildrenFromDOM:function(t){var e,n;e=this.get("dom"),n=e.parentNode,n&&t&&t.length&&t.forEach(function(t){var e=t.get("dom");t.get("isTag")&&t.set("isLocked",!0),this.parentHasChild(n,e)&&n.removeChild(e)}.bind(this))},updateDOM:function(){var t=this.replaceTokens("{{$0}}",this.get("tokens"));t!==this.get("cachedValue")&&(this.set("cachedValue",t),t?(this.removeChildrenFromDOM(this.get("elseChildren")),this.addChildrenToDOM(this.get("ifChildren"))):(this.removeChildrenFromDOM(this.get("ifChildren")),this.addChildrenToDOM(this.get("elseChildren"))))},render:function(){this.updateDOM()}})}).attach("$b.dom.tags"),t("brink/dom/tags/for",["../Tag","../Template","../../core/ObjectProxy","../../core/Dictionary","../../utils/get"],function(e,n,i,r,s){return e.extend({loopKey:null,loopEnum:null,template:null,parseOptions:function(e){var n,i;i=/(\S*)\s*(?:\S*)\s*(\S*)/gi,n=i.exec(e),t.assert('Improperly formatted "for" tag. '+e,!!n),this.set("loopKey",n[1]),this.set("loopEnum",n[2]),this.set("tokens",[{string:n[0],name:n[2]+".@each",filter:null}])},compile:function(){var t,e;this.parseOptions(this.get("dom").getAttribute("options")),t=this.get("dom"),e=document.createTextNode(""),t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t),this.set("template",n.create(t)),this.set("dom",e)},addTemplateToDOM:function(t,e){var n,i,r,o;n=this.get("dom"),o=n.parentNode,o&&(r=t.get("domObj.children"),i=document.createDocumentFragment(),r.forEach(function(t){i.appendChild(t.get("dom"))}),o.insertBefore(i,e?n.childNodes[e*s(r,"length")]:n.nextSibling))},removeTemplateFromDOM:function(t){var e,n,i;e=this.get("dom"),i=e.parentNode,i&&(n=t.get("domObj.children"),n.forEach(function(t){i.removeChild(t.get("dom"))}))},addItem:function(e,n){var r,s,o,a,c;o=this.get("loopDict"),t.assert("Item already exists in list...",!o.has(e)),r=this.get("template"),s=this.get("loopKey"),o.add(e,a),a=r.clone(),c={proxy:this.get("context")},c[s]=e,c=i.create(c),o.add(e,a),this.addTemplateToDOM(a,n),a.render(c)},removeItem:function(e){var n;n=this.get("loopDict"),t.assert("Item does not exist in list...",n.has(e)),this.removeTemplateFromDOM(n.remove(e)[0])},moveItem:function(e){var n;n=this.get("loopDict"),t.assert("Item does not exist in list...",n.has(e))},updateDOM:function(){var t,e,n,i;t=this.get("template"),e=this.get("loopDict"),n=this.get("context."+this.get("loopEnum")),n&&s(n,"length")&&(e||(this.set("loopDict",e=r.create()),n.forEach(function(t,e){this.addItem(t,e)}.bind(this))),i=n.getChanges())},render:function(){this.updateDOM()}})}).attach("$b.dom.tags"),t("brink/browser/ajax",[],function(){return t.F}).attach("$b"),t("brink/browser/ReactMixin",function(){if("undefined"!=typeof window&&window.React){var e=window.React.createClass;React.createClass=function(){var n=e.apply(this,arguments);return function(e,i){var r,s;return e instanceof t.Object&&(s=e,e=e.getProperties()),r=n.call(this,e,i),s&&(r.__props=s),r}}}return{componentWillMount:function(){this.__props&&this.__props.watch(this.__propsChanged)},__propsChanged:function(){this.setProps(this.__props.getChangedProperties())},componentWillUnmount:function(){this.__props&&this.__props.unwatch(this.__propsChanged)}}}).attach("$b")}).call(this);